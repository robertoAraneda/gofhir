# Contributing to GoFHIR

Thank you for your interest in contributing to GoFHIR! This document provides guidelines and instructions for contributing.

## Code of Conduct

By participating in this project, you agree to abide by our [Code of Conduct](CODE_OF_CONDUCT.md).

## How to Contribute

### Reporting Bugs

Before creating a bug report, please check existing issues to avoid duplicates. When creating a bug report, include:

- A clear and descriptive title
- Steps to reproduce the issue
- Expected behavior vs actual behavior
- Go version and operating system
- Any relevant code snippets or error messages

### Suggesting Features

Feature suggestions are welcome! Please open an issue with:

- A clear description of the feature
- The use case and benefits
- Any implementation ideas you might have

### Pull Requests

1. **Fork the repository** and create your branch from `main`
2. **Make your changes** following the coding standards below
3. **Add tests** for any new functionality
4. **Run tests** to ensure nothing is broken: `go test ./...`
5. **Run linter** to ensure code quality: `golangci-lint run`
6. **Commit your changes** using conventional commits (see below)
7. **Push to your fork** and submit a pull request

## Development Setup

```bash
# Clone your fork
git clone https://github.com/YOUR_USERNAME/gofhir.git
cd gofhir

# Install dependencies
go mod download

# Run tests
go test ./...

# Run linter (install golangci-lint first)
golangci-lint run
```

## Coding Standards

### Go Style

- Follow standard Go conventions and [Effective Go](https://golang.org/doc/effective_go.html)
- Use `gofmt` for formatting
- Keep functions focused and small
- Add comments for exported functions and types

### Code Generation

This project uses code generation for FHIR types. If you need to modify generated code:

1. Modify the templates in `internal/codegen/generator/templates/`
2. Run the code generator: `go run ./cmd/codegen/`
3. Do not manually edit files marked with "Code generated by gofhir. DO NOT EDIT."

### Testing

- Write tests for new functionality
- Ensure existing tests pass before submitting
- Use table-driven tests where appropriate
- Test edge cases and error conditions

## Commit Messages

We follow [Conventional Commits](https://www.conventionalcommits.org/):

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

Types:
- `feat`: New feature
- `fix`: Bug fix
- `docs`: Documentation changes
- `style`: Code style changes (formatting, etc.)
- `refactor`: Code refactoring
- `test`: Adding or updating tests
- `chore`: Maintenance tasks

Examples:
```
feat(r4): add Patient resource validation
fix(fhirpath): correct date comparison logic
docs: update installation instructions
test(ucum): add unit conversion tests
```

## Project Structure

```
gofhir/
├── cmd/codegen/        # Code generation CLI
├── internal/codegen/   # Code generation logic
├── pkg/
│   ├── fhir/          # FHIR type definitions
│   │   ├── r4/        # FHIR R4 types
│   │   ├── r4b/       # FHIR R4B types
│   │   └── r5/        # FHIR R5 types
│   ├── fhirpath/      # FHIRPath implementation
│   └── ucum/          # UCUM unit normalization
└── testdata/          # Test fixtures
```

## Questions?

Feel free to open an issue for any questions about contributing.

Thank you for contributing!