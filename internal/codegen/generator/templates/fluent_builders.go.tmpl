{{- /* Template for generating fluent_builders.go */ -}}
// Code generated by gofhir. DO NOT EDIT.
// Source: FHIR StructureDefinitions (fluent builders)
// Package: {{.PackageName}}

package {{.PackageName}}

{{range .Resources}}
{{- $r := . -}}
// =============================================================================
// {{.Name}} - Fluent Builder
// =============================================================================

// {{.Name}}Builder provides a fluent API for constructing {{.Name}} resources.
type {{.Name}}Builder struct {
	{{.LowerName}} *{{.Name}}
}

// New{{.Name}}Builder creates a new {{.Name}}Builder.
func New{{.Name}}Builder() *{{.Name}}Builder {
	return &{{.Name}}Builder{
		{{.LowerName}}: &{{.Name}}{},
	}
}

// Build returns the constructed {{.Name}} resource.
func (b *{{.Name}}Builder) Build() *{{.Name}} {
	return b.{{.LowerName}}
}

{{range .Properties}}
{{- if not (eq .GoType "*interface{}")}}
{{- if .IsArray}}
// Add{{.Name}} adds a {{.Name}} element.
func (b *{{$r.Name}}Builder) Add{{.Name}}(v {{.ElementType}}) *{{$r.Name}}Builder {
	b.{{$r.LowerName}}.{{.Name}} = append(b.{{$r.LowerName}}.{{.Name}}, v)
	return b
}

{{- else if .IsPointer}}
// Set{{.Name}} sets the {{.Name}} field.
func (b *{{$r.Name}}Builder) Set{{.Name}}(v {{.BaseType}}) *{{$r.Name}}Builder {
	b.{{$r.LowerName}}.{{.Name}} = &v
	return b
}

{{- else}}
// Set{{.Name}} sets the {{.Name}} field.
func (b *{{$r.Name}}Builder) Set{{.Name}}(v {{.GoType}}) *{{$r.Name}}Builder {
	b.{{$r.LowerName}}.{{.Name}} = v
	return b
}

{{- end}}
{{- end}}
{{- end}}

{{end}}
