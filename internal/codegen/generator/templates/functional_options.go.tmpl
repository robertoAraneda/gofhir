{{- /* Template for generating functional_options.go */ -}}
// Code generated by gofhir. DO NOT EDIT.
// Source: FHIR StructureDefinitions (functional options)
// Package: {{.PackageName}}

package {{.PackageName}}

{{range .Resources}}
{{- $r := . -}}
// =============================================================================
// {{.Name}} - Functional Options
// =============================================================================

// {{.Name}}Option is a functional option for configuring a {{.Name}}.
type {{.Name}}Option func(*{{.Name}})

// New{{.Name}} creates a new {{.Name}} with the given options.
func New{{.Name}}(opts ...{{.Name}}Option) *{{.Name}} {
	r := &{{.Name}}{}
	for _, opt := range opts {
		opt(r)
	}
	return r
}

{{range .Properties}}
{{- if not (eq .GoType "*interface{}")}}
{{- if .IsArray}}
// With{{$r.Name}}{{.Name}} adds a {{.Name}} to the {{$r.Name}}.
func With{{$r.Name}}{{.Name}}(v {{.ElementType}}) {{$r.Name}}Option {
	return func(r *{{$r.Name}}) {
		r.{{.Name}} = append(r.{{.Name}}, v)
	}
}

{{- else if .IsPointer}}
// With{{$r.Name}}{{.Name}} sets the {{.Name}} field.
func With{{$r.Name}}{{.Name}}(v {{.BaseType}}) {{$r.Name}}Option {
	return func(r *{{$r.Name}}) {
		r.{{.Name}} = &v
	}
}

{{- else}}
// With{{$r.Name}}{{.Name}} sets the {{.Name}} field.
func With{{$r.Name}}{{.Name}}(v {{.GoType}}) {{$r.Name}}Option {
	return func(r *{{$r.Name}}) {
		r.{{.Name}} = v
	}
}

{{- end}}
{{- end}}
{{- end}}

{{end}}
